[supervisord]
nodaemon=true
logfile=/app/logs/supervisord.log
pidfile=/tmp/supervisord.pid
childlogdir=/app/logs
user=root

[program:streamlit]
command=python3 -m streamlit run src/streamlit_app.py --server.port=8501 --server.address=0.0.0.0 --server.headless=true
directory=/app
autostart=true
autorestart=true
startretries=3
stderr_logfile=/app/logs/streamlit.err.log
stdout_logfile=/app/logs/streamlit.out.log
environment=PYTHONUNBUFFERED=1

[program:api]
command=python3 -m uvicorn src.api_server:app --host 0.0.0.0 --port 8080 --workers 1 --log-level info
directory=/app
autostart=true
autorestart=true
startretries=3
stderr_logfile=/app/logs/api.err.log
stdout_logfile=/app/logs/api.out.log
environment=PYTHONUNBUFFERED=1
